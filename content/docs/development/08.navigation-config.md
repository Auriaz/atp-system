---
title: 'Konfiguracja nawigacji dokumentacji'
description: 'Analiza struktury nawigacji dla systemu dokumentacji ATP wykorzystujÄ…cego Nuxt Content'
category: 'Development'
version: '1.0.0'
lastUpdated: '2025-05-28'
createdAt: '2025-05-28'
requiredRole: ['admin', 'developer']
icon: 'i-heroicons-bars-3'
author: 'ATP System Team'
status: 'published'
difficulty: 'intermediate'
readingTime: 15
docType: 'guide'
tags: ['navigation', 'structure', 'documentation', 'nuxt-content']
navigation:
  title: 'Nawigacja'
  icon: 'i-heroicons-bars-3'
  order: 2
related:
  - '/docs/development/index'
  - '/docs/.doc-templates/style-guide'
---

# Konfiguracja nawigacji dokumentacji

Dokumentacja techniczna systemu nawigacji w ATP System wykorzystujÄ…cego Nuxt Content z automatycznym zarzÄ…dzaniem strukturÄ… dokumentÃ³w.

## ğŸ“– Wprowadzenie

System ATP wykorzystuje **automatycznÄ… nawigacjÄ™ Nuxt Content** do zarzÄ…dzania strukturÄ… dokumentacji. W przeciwieÅ„stwie do statycznej konfiguracji, nawigacja jest generowana dynamicznie na podstawie struktury plikÃ³w i frontmatter kaÅ¼dego dokumentu.

::alert{type="warning"}
âš ï¸ **Uwaga**: Ten dokument opisuje rzeczywistÄ… implementacjÄ™ nawigacji w systemie ATP. System nie wykorzystuje statycznej konfiguracji TypeScript, ale automatycznÄ… nawigacjÄ™ Nuxt Content.
::

### Kluczowe rÃ³Å¼nice od statycznej konfiguracji

::list{type="info"}
- **Automatyczne generowanie**: Nawigacja tworzona z struktury plikÃ³w w `content/docs/`
- **Metadane z frontmatter**: KolejnoÅ›Ä‡ i organizacja przez pola `navigation.order`
- **Dynamiczne filtrowanie**: DostÄ™p kontrolowany przez `requiredRole` w frontmatter
- **ResponsywnoÅ›Ä‡**: Automatyczna adaptacja bez dodatkowej konfiguracji
::

## ğŸ—ï¸ Rzeczywista implementacja nawigacji

### Komponenty nawigacyjne

#### XDocumentationSidebar.vue
GÅ‚Ã³wny komponent sidebar wykorzystujÄ…cy:
```typescript
// Pobieranie nawigacji z Nuxt Content
const { data: navigation } = await queryCollectionNavigation('docs')
```

**Kluczowe funkcje:**
- Automatyczne renderowanie struktury drzewa
- ObsÅ‚uga aktywnych linkÃ³w i rozwijanych sekcji  
- Filtrowanie dokumentÃ³w wedÅ‚ug rÃ³l uÅ¼ytkownika
- Responsywna obsÅ‚uga mobile/desktop

#### XDocumentationSidebarItem.vue
Komponent pojedynczego elementu nawigacji:
- Rozwijanie/zwijanie sekcji z animacjami
- Wskazywanie aktywnej strony
- ObsÅ‚uga ikon z frontmatter
- ZagnieÅ¼dÅ¼one poziomy nawigacji

### Composables zarzÄ…dzajÄ…ce nawigacjÄ…

#### useDocumentation.ts
```typescript
// GÅ‚Ã³wne funkcje nawigacji
export const useDocumentation = () => {
  // Pobieranie nawigacji
  const getNavigation = async () => {
    return await queryCollectionNavigation('docs')
  }
  
  // Sprawdzanie dostÄ™pu do dokumentu
  const checkDocumentAccess = (document) => {
    const { user } = useAuthUser()
    return hasRequiredRole(user.value?.role, document.requiredRole)
  }
  
  // Pobieranie pojedynczego dokumentu
  const getDocument = async (path: string) => {
    return await queryContent(path).findOne()
  }
}
```

#### useSidebar.ts
ZarzÄ…dzanie stanem sidebar:
```typescript
export const useSidebar = () => {
  const isOpen = ref(false)
  const expandedSections = ref<string[]>([])
  
  // Persistence w localStorage
  const saveState = () => {
    localStorage.setItem('sidebar-state', JSON.stringify({
      expandedSections: expandedSections.value
    }))
  }
  
  // ResponsywnoÅ›Ä‡
  const toggleMobile = () => {
    isOpen.value = !isOpen.value
  }
}
```

## ğŸ“ Aktualna struktura dokumentacji

### Rzeczywiste katalogi i pliki

Na podstawie analizy struktury plikÃ³w w systemie ATP, rzeczywista organizacja dokumentacji wyglÄ…da nastÄ™pujÄ…co:

```
content/docs/
â”œâ”€â”€ .doc-templates/           # Szablony dokumentacji (hidden)
â”‚   â”œâ”€â”€ faq-template.md
â”‚   â”œâ”€â”€ role-template.md  
â”‚   â”œâ”€â”€ standard-template.md
â”‚   â””â”€â”€ style-guide.md
â”œâ”€â”€ admin/                    # Dokumentacja dla administratorÃ³w
â”‚   â”œâ”€â”€ faq.md
â”‚   â””â”€â”€ index.md
â”œâ”€â”€ athlete/                  # Dokumentacja dla sportowcÃ³w
â”‚   â”œâ”€â”€ faq.md
â”‚   â””â”€â”€ index.md
â”œâ”€â”€ coach/                    # Dokumentacja dla trenerÃ³w
â”‚   â”œâ”€â”€ faq.md
â”‚   â”œâ”€â”€ index.md
â”‚   â””â”€â”€ trening.md
â”œâ”€â”€ development/              # Dokumentacja techniczna
â”‚   â”œâ”€â”€ api.md
â”‚   â”œâ”€â”€ architektura.md
â”‚   â”œâ”€â”€ changelog-jwt.md
â”‚   â”œâ”€â”€ git-workflow.md
â”‚   â”œâ”€â”€ index.md
â”‚   â”œâ”€â”€ konfiguracja.md
â”‚   â”œâ”€â”€ navigation-config.md  # Ten dokument
â”‚   â”œâ”€â”€ session-management.md
â”‚   â”œâ”€â”€ uwierzytelnianie-jwt.md
â”‚   â””â”€â”€ uÅ¼ytkownicy.md
â”œâ”€â”€ editor/                   # Dokumentacja dla edytorÃ³w
â”‚   â”œâ”€â”€ content-management.md
â”‚   â”œâ”€â”€ faq.md
â”‚   â””â”€â”€ index.md
â”œâ”€â”€ manager/                  # Dokumentacja dla menedÅ¼erÃ³w
â”‚   â”œâ”€â”€ faq.md
â”‚   â””â”€â”€ index.md
â”œâ”€â”€ public/                   # Dokumenty publiczne
â”‚   â”œâ”€â”€ getting-started.md
â”‚   â”œâ”€â”€ guides.md
â”‚   â”œâ”€â”€ index.md
â”‚   â””â”€â”€ introduction.md
â”œâ”€â”€ reports/                  # Raporty i analizy
â”‚   â”œâ”€â”€ features-implementation/
â”‚   â”œâ”€â”€ project-status/
â”‚   â”œâ”€â”€ technical-fixes/
â”‚   â”œâ”€â”€ ui-improvements/
â”‚   â””â”€â”€ index.md
â””â”€â”€ user/                     # Dokumentacja dla uÅ¼ytkownikÃ³w
    â”œâ”€â”€ faq.md
    â””â”€â”€ index.md
```

### Automatyczne generowanie nawigacji

#### Jak dziaÅ‚a system Nuxt Content

```typescript
// W komponencie XDocumentationSidebar.vue
const { data: navigation } = await $fetch('/api/_content/navigation/docs')

// Struktura zwracana przez Nuxt Content:
{
  "/docs/admin": {
    title: "Dla administratorÃ³w",
    order: 5,
    icon: "i-heroicons-cog-6-tooth",
    children: [
      {
        title: "Przewodnik administratora", 
        to: "/docs/admin/index",
        order: 1
      },
      {
        title: "FAQ administratorÃ³w",
        to: "/docs/admin/faq", 
        order: 99
      }
    ]
  },
  // ... pozostaÅ‚e sekcje
}
```

#### Konfiguracja przez frontmatter

KaÅ¼dy dokument definiuje swojÄ… pozycjÄ™ w nawigacji przez frontmatter:

```yaml
---
title: 'Nazwa dokumentu'
navigation:
  title: 'TytuÅ‚ w nawigacji'  
  icon: 'i-heroicons-home'
  order: 1
requiredRole: ['admin', 'developer']
---
```

### Filtrowanie dostÄ™pu w czasie rzeczywistym

#### Sprawdzanie uprawnieÅ„ w komponencie

```typescript
// W XDocumentationSidebar.vue
const filterNavigationByRole = (navigation: any[], userRole: string) => {
  return navigation.filter(section => {
    // SprawdÅº dostÄ™p do sekcji
    if (section.requiredRole && !hasRequiredRole(userRole, section.requiredRole)) {
      return false
    }
    
    // Filtruj elementy w sekcji
    if (section.children) {
      section.children = section.children.filter(item => {
        return !item.requiredRole || hasRequiredRole(userRole, item.requiredRole)
      })
    }
    
    return true
  })
}
```

#### Pomocnicze funkcje autoryzacji

```typescript
// W composables/useDocumentation.ts  
export const hasRequiredRole = (userRole: string, requiredRoles: string[]) => {
  if (!requiredRoles || requiredRoles.length === 0) return true
  if (!userRole) return false
  
  // Admin ma dostÄ™p do wszystkiego
  if (userRole === 'admin') return true
  
  return requiredRoles.includes(userRole)
}
```

## ğŸ“± Layout i responsywnoÅ›Ä‡

### XDocumentationLayout.vue

GÅ‚Ã³wny layout dokumentacji ktÃ³ry:
- ÅÄ…czy sidebar z treÅ›ciÄ… dokumentu
- ObsÅ‚uguje responsywnoÅ›Ä‡ mobile/desktop
- ZarzÄ…dza stanem rozwiniÄ™cia menu
- Implementuje breadcrumbs i nawigacjÄ™ poprzedni/nastÄ™pny

```vue
<template>
  <div class="documentation-layout">
    <!-- Sidebar -->
    <XDocumentationSidebar 
      :navigation="filteredNavigation"
      :is-open="sidebarOpen"
      @close="sidebarOpen = false"
    />
    
    <!-- Main content -->
    <main class="documentation-content">
      <XDocumentationBreadcrumbs :path="$route.path" />
      
      <!-- Document content -->
      <ContentDoc>
        <template #not-found>
          <XDocumentationNotFound />
        </template>
      </ContentDoc>
      
      <!-- Navigation arrows -->
      <XDocumentationNavigation 
        :prev="prevPage" 
        :next="nextPage" 
      />
    </main>
  </div>
</template>
```

### Responsywne zachowanie

```css
.documentation-layout {
  display: grid;
  grid-template-columns: 280px 1fr;
  min-height: 100vh;
}

@media (max-width: 768px) {
  .documentation-layout {
    grid-template-columns: 1fr;
  }
  
  .documentation-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 50;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  
  .documentation-sidebar.is-open {
    transform: translateX(0);
  }
}
```

## ğŸ” Integracja z wyszukiwaniem

### Kategoryzacja dokumentÃ³w

System automatycznie kategoryzuje dokumenty do wyszukiwania na podstawie Å›cieÅ¼ki:

```typescript
// W composables/useDocumentationSearch.ts
export const getSearchCategories = () => {
  return {
    'getting-started': {
      title: 'Pierwsze kroki',
      weight: 10,
      paths: ['/docs/public/']
    },
    'user-guides': {
      title: 'Przewodniki uÅ¼ytkownika', 
      weight: 8,
      paths: ['/docs/athlete/', '/docs/coach/', '/docs/user/']
    },
    'technical': {
      title: 'Dokumentacja techniczna',
      weight: 6, 
      paths: ['/docs/development/']
    },
    'faq': {
      title: 'FAQ',
      weight: 9,
      paths: ['**/faq.md']
    },
    'admin': {
      title: 'Administracja',
      weight: 4,
      paths: ['/docs/admin/', '/docs/manager/']
    }
  }
}
```

## ğŸ’¾ Stan nawigacji i persistence

### ZapamiÄ™tywanie stanu

```typescript
// W composables/useSidebar.ts
export const useSidebar = () => {
  const isOpen = ref(false)
  const expandedSections = ref<string[]>([])
  
  // Wczytaj stan z localStorage przy inicjalizacji
  onMounted(() => {
    const saved = localStorage.getItem('documentation-sidebar-state')
    if (saved) {
      const state = JSON.parse(saved)
      expandedSections.value = state.expandedSections || []
    }
  })
  
  // Zapisz stan przy zmianach
  watch(expandedSections, (newState) => {
    localStorage.setItem('documentation-sidebar-state', JSON.stringify({
      expandedSections: newState
    }))
  }, { deep: true })
  
  return {
    isOpen,
    expandedSections,
    toggleSection: (section: string) => {
      const index = expandedSections.value.indexOf(section)
      if (index > -1) {
        expandedSections.value.splice(index, 1)
      } else {
        expandedSections.value.push(section)
      }
    }
  }
}
```

## âš ï¸ Uwagi implementacyjne

### RÃ³Å¼nice od opisywanej konfiguracji

::alert{type="warning"}
**Uwaga**: Oryginalny dokument opisywaÅ‚ statycznÄ… konfiguracjÄ™ TypeScript, ale rzeczywisty system wykorzystuje:

1. **AutomatycznÄ… nawigacjÄ™ Nuxt Content** zamiast statycznej konfiguracji
2. **Frontmatter** kaÅ¼dego dokumentu do definiowania pozycji
3. **Dynamiczne filtrowanie** wedÅ‚ug rÃ³l uÅ¼ytkownika
4. **API `/api/_content/navigation/docs`** do pobierania struktury
::

### Zalety obecnego rozwiÄ…zania

::list{type="success"}
- **ElastycznoÅ›Ä‡**: Åatwe dodawanie nowych dokumentÃ³w bez edycji konfiguracji
- **Automatyzacja**: Struktura generowana z systemu plikÃ³w  
- **BezpieczeÅ„stwo**: Filtrowanie na poziomie komponentu
- **WydajnoÅ›Ä‡**: Cache'owanie nawigacji przez Nuxt Content
- **Prostota**: Brak potrzeby synchronizacji miÄ™dzy konfiguracjÄ… a plikami
::

## ğŸ”® PrzyszÅ‚e ulepszenia

### Planowane funkcje

::list{type="info"}
- **Breadcrumb Navigation**: Hierarchiczna Å›cieÅ¼ka nawigacji
- **Quick Actions**: SkrÃ³ty do czÄ™stych operacji
- **Bookmarks**: Zapisywanie ulubionych dokumentÃ³w
- **Recent Documents**: Historia przeglÄ…danych stron
- **Cross-references**: Sugestie powiÄ…zanych dokumentÃ³w
- **Progress Tracking**: WskaÅºniki postÄ™pu czytania
::

### Potencjalne konfiguracje

```typescript
// PrzyszÅ‚oÅ›Ä‡: Dynamiczna konfiguracja z CMS
export const dynamicNavigationConfig = {
  enableUserCustomization: true,
  enableBookmarks: true,
  enableRecentDocuments: true,
  enableProgressTracking: true,
  maxRecentItems: 10,
  defaultExpandedSections: ['public', 'user']
}
```

---

*Dokument zaktualizowany do rzeczywistego stanu implementacji nawigacji w ATP System*
