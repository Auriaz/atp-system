# ğŸ“§ Konfiguracja Email - Dokumentacja

## PrzeglÄ…d

Komponent `XDashboardSettingsEmail` umoÅ¼liwia administratorom konfiguracjÄ™ ustawieÅ„ email w systemie ATP. Jest to kluczowy element infrastruktury komunikacyjnej aplikacji, pozwalajÄ…cy na wysyÅ‚anie powiadomieÅ„, potwierdzeÅ„ rejestracji, resetowania haseÅ‚ i innych komunikatÃ³w systemowych.

## Lokalizacja

```
app/components/X/Dashboard/Settings/Email/XDashboardSettingsEmail.vue
```

## FunkcjonalnoÅ›Ä‡

### GÅ‚Ã³wne moÅ¼liwoÅ›ci

1. **WybÃ³r dostawcy email** - obsÅ‚uga najpopularniejszych dostawcÃ³w SMTP
2. **Konfiguracja SMTP** - szczegÃ³Å‚owe ustawienia serwera
3. **Testowanie konfiguracji** - weryfikacja dziaÅ‚ania przed zapisaniem
4. **ZarzÄ…dzanie danymi nadawcy** - konfiguracja "From Name" i "From Email"
5. **Tryb ciemny** - peÅ‚na obsÅ‚uga dark mode

### ObsÅ‚ugiwani dostawcy email

#### Dostawcy komercyjni
- **Gmail** - `smtp.gmail.com:587`
- **Outlook/Hotmail** - `smtp-mail.outlook.com:587`
- **Yahoo Mail** - `smtp.mail.yahoo.com:587`
- **Office 365** - `smtp.office365.com:587`
- **Zoho Mail** - `smtp.zoho.com:587`

#### UsÅ‚ugi transakcyjne
- **SendGrid** - `smtp.sendgrid.net:587`
- **Mailgun** - `smtp.mailgun.org:587`
- **Amazon SES** - `email-smtp.us-east-1.amazonaws.com:587`

#### Niestandardowy SMTP
- **Custom SMTP** - moÅ¼liwoÅ›Ä‡ rÄ™cznej konfiguracji

## Interfejs uÅ¼ytkownika

### Pola konfiguracyjne

| Pole | Opis | Wymagane | Uwagi |
|------|------|----------|-------|
| Email Provider | WybÃ³r dostawcy email | âœ… | Auto-konfiguruje pozostaÅ‚e pola |
| SMTP Host | Adres serwera SMTP | âœ… | Auto-wypeÅ‚niany dla znanych dostawcÃ³w |
| SMTP Port | Port serwera SMTP | âœ… | DomyÅ›lnie 587 |
| Use SSL/TLS | Zabezpieczenie poÅ‚Ä…czenia | âŒ | ZalecanĞµ dla bezpieczeÅ„stwa |
| Username/Email | Adres email do uwierzytelnienia | âœ… | Adres konta SMTP |
| Password | HasÅ‚o lub App Password | âœ… | Dla Gmail wymagane App Password |
| From Name | Nazwa nadawcy | âŒ | WyÅ›wietlana w emailach |
| From Email | Adres nadawcy | âŒ | Adres "od kogo" |
| Test Email | Adres do testowania | âŒ | Do weryfikacji konfiguracji |

### Przyciski akcji

1. **Save Settings** - Zapisuje konfiguracjÄ™ email
2. **Test Email** - WysyÅ‚a testowego emaila
3. **Reset** - Przywraca ostatnio zapisane ustawienia

## API Endpoints

Komponent korzysta z nastÄ™pujÄ…cych endpoints:

### GET `/api/settings/email`
Pobiera aktualne ustawienia email z bazy danych.

**OdpowiedÅº:**
```json
{
  "provider": "gmail",
  "host": "smtp.gmail.com",
  "port": 587,
  "secure": false,
  "user": "example@gmail.com",
  "fromName": "ATP System",
  "fromEmail": "noreply@yourdomain.com"
}
```

### POST `/api/settings/email/update`
Aktualizuje ustawienia email w systemie.

**Dane wejÅ›ciowe:**
```json
{
  "provider": "gmail",
  "host": "smtp.gmail.com",
  "port": 587,
  "secure": false,
  "user": "example@gmail.com",
  "password": "app-password",
  "fromName": "ATP System",
  "fromEmail": "noreply@yourdomain.com"
}
```

### POST `/api/settings/email/test`
WysyÅ‚a testowego emaila z bieÅ¼Ä…cÄ… konfiguracjÄ….

**Dane wejÅ›ciowe:**
```json
{
  "provider": "gmail",
  "host": "smtp.gmail.com",
  "port": 587,
  "secure": false,
  "user": "example@gmail.com",
  "password": "app-password",
  "fromName": "ATP System",
  "fromEmail": "noreply@yourdomain.com",
  "testEmail": "test@example.com"
}
```

## ZarzÄ…dzanie stanami

### Stany loading
- `loading` - podczas zapisywania ustawieÅ„
- `testing` - podczas wysyÅ‚ania testowego emaila

### Komunikaty statusu
- **Sukces** - zielone tÅ‚o, konfiguracja zapisana/test wysÅ‚any
- **BÅ‚Ä…d** - czerwone tÅ‚o, szczegÃ³Å‚y bÅ‚Ä™du
- **Informacja** - niebieskie tÅ‚o, ogÃ³lne komunikaty

## BezpieczeÅ„stwo

### App Passwords
Dla dostawcÃ³w jak Gmail wymagane sÄ… App Passwords zamiast zwykÅ‚ych haseÅ‚:

1. WÅ‚Ä…cz 2FA na koncie Google
2. Wygeneruj App Password w ustawieniach konta
3. UÅ¼yj wygenerowanego hasÅ‚a w konfiguracji

### Szyfrowanie
- Wszystkie dane przesyÅ‚ane sÄ… przez HTTPS
- HasÅ‚a nie sÄ… wyÅ›wietlane w logach
- Konfiguracja przechowywana jest w bezpiecznej bazie danych

## Uprawnienia

DostÄ™p do komponentu kontrolowany jest przez system uprawnieÅ„:

```vue
<XPermission :permission="emailPermission">
  <XDashboardSettingsEmail />
</XPermission>
```

Wymagane uprawnienie: `settings:email`

## ObsÅ‚uga bÅ‚Ä™dÃ³w

### CzÄ™ste problemy

1. **BÅ‚Ä™dne dane uwierzytelnienia**
   - SprawdÅº username/email i hasÅ‚o
   - Dla Gmail uÅ¼yj App Password

2. **Problemy z poÅ‚Ä…czeniem**
   - Weryfikuj host i port SMTP
   - SprawdÅº ustawienia firewall

3. **BÅ‚Ä™dy SSL/TLS**
   - Upewnij siÄ™, Å¼e ustawienie SSL/TLS jest zgodne z serwerem
   - WiÄ™kszoÅ›Ä‡ serwerÃ³w wymaga SSL/TLS na porcie 587

## PrzykÅ‚ady konfiguracji

### Gmail
```
Provider: Gmail
Host: smtp.gmail.com
Port: 587
SSL/TLS: false (STARTTLS)
Username: your-email@gmail.com
Password: [App Password]
```

### SendGrid
```
Provider: SendGrid
Host: smtp.sendgrid.net
Port: 587
SSL/TLS: false (STARTTLS)
Username: apikey
Password: [SendGrid API Key]
```

### Custom SMTP
```
Provider: Custom SMTP
Host: mail.yourdomain.com
Port: 587
SSL/TLS: true
Username: noreply@yourdomain.com
Password: [Server Password]
```

## ObsÅ‚uga trybu ciemnego

Komponent automatycznie dostosowuje siÄ™ do trybu ciemnego:

- **Kolory tÅ‚a** - biaÅ‚e/ciemnoszare
- **Tekst** - czarny/biaÅ‚y z odpowiednim kontrastem
- **Obramowania** - szare z rÃ³Å¼nymi odcieniami
- **Komunikaty statusu** - zachowujÄ… kolorystykÄ™ z dostosowanÄ… przezroczystoÅ›ciÄ…

## RozwÃ³j i konserwacja

### Dodawanie nowego dostawcy

1. Dodaj konfiguracjÄ™ do obiektu `smtpProviders`:
```typescript
newProvider: {
  name: 'New Provider',
  host: 'smtp.newprovider.com',
  port: 587,
  secure: false,
  description: 'New Provider SMTP'
}
```

2. Dodaj opcjÄ™ do selecta:
```vue
<option value="newProvider">New Provider</option>
```

### Testowanie

Przed deployment naleÅ¼y przetestowaÄ‡:
- [ ] Zapisywanie ustawieÅ„
- [ ] WysyÅ‚anie testowych emaili
- [ ] ObsÅ‚ugÄ™ bÅ‚Ä™dÃ³w
- [ ] Tryb ciemny
- [ ] ResponsywnoÅ›Ä‡ na urzÄ…dzeniach mobilnych

## Zobacz takÅ¼e

- [Dokumentacja API Email](/docs/api/email)
- [ZarzÄ…dzanie uprawnieniami](/docs/admin/permissions)
- [Konfiguracja SMTP](/docs/admin/smtp-setup)
